- name: Install base packages on hosts
  hosts: servers:workstations
  sudo: True
  tasks:


  ## Archlinux and Manjaro
  - name: Install base packages (Arch)
    pacman: name={{item}} state=installed
    when: ansible_distribution in ['Archlinux', 'Manjaro']
    with_items:
      - base-devel
      - colordiff
      - cronie
      - curl
      - dnsutils
      - flake8
      - git
      - htop
      - iotop
      - linux-lts
      - linux-lts-headers
      - lm_sensors
      - lynx
      - mosh
      - ncdu
      - python-pyflakes
      - python-virtualenv
      - python2-flake8
      - python2-pip
      - python2-pyflakes
      - python2-virtualenv
      - rsync
      - ruby
      - screen
      - sshfs
      - the_silver_searcher
      - tig
      - tmux
      - vim-python3
      - wget


  ## Fedora packages
  - name: Install base packages (Fedora)
    dnf: name={{item}} state=installed
    when: ansible_distribution == 'Fedora'
    with_items:
      - colordiff
      - cronie
      - curl
      - git
      - htop
      - iotop
      - lm_sensors
      - lynx
      - mailx
      - mosh
      - ncdu
      - pyflakes
      - python-flake8
      - python-pep8
      - python-pip
      - python-virtualenv
      - python3-flake8
      - python3-pep8
      - python3-pyflakes
      - rsync
      - ruby
      - screen
      - sshfs
      - the_silver_searcher
      - tig
      - tmux
      - vim-enhanced
      - wget


    ## CentOS packages
  - name: Install base packages (CentOS)
    yum: name={{item}} state=installed
    when: ansible_distribution == 'CentOS'
    with_items:
      - colordiff
      - cronie
      - curl
      - fuse-sshfs
      - git
      - htop
      - iotop
      - lm_sensors
      - lynx
      - mosh
      - ncdu
      - rsync
      - screen
      - tmux
      - vim-enhanced
      - wget


   ## Debian and Ubuntu
  - name: Install base packages (Debian-based)
    apt: name={{item}} state=installed
    when: ansible_distribution in ['Debian', 'Linuxmint', 'Ubuntu']
    with_items:
      - aptitude
      - colordiff
      - cron
      - curl
      - git
      - heirloom-mailx
      - htop
      - iotop
      - lm-sensors
      - lynx
      - mosh
      - ncdu
      - pyflakes
      - python-dev
      - python-flake8
      - python-pip
      - python-virtualenv
      - python3-flake8
      - rake
      - rsync
      - ruby
      - ruby-dev
      - screen
      - silversearcher-ag
      - sshfs
      - tig
      - tmux
      - vim-nox
      - wget


  - name: Remove unneeded Debian packages
    apt: name={{ item }} state=absent
    when: ansible_distribution in ['Debian', 'Linuxmint', 'Ubuntu']
    with_items:
      - exim4
      - exim4-base
      - exim4-config
